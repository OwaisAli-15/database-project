<!DOCTYPE html>
<html style="font-size: 16px;">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Book Room, My Bookings">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>reservation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='basic/css/nicepage.css') }}" media="screen">
    <link rel="stylesheet" href="{{ url_for('static', filename='basic/css/Log-In.css') }}" media="screen">
    <script class="u-script" type="text/javascript" src="{{ url_for('static', filename='basic/js/jquery.js') }}"
            defer=""></script>
    <script class="u-script" type="text/javascript" src="{{ url_for('static', filename='basic/js/nicepage.js') }}"
            defer=""></script>
    <meta name="generator" content="Nicepage 3.27.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "",
        "logo": "images/BUITEMS_logo.png"
    }</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="reservation">
    <meta property="og:type" content="website">
</head>
<body class="u-body">
<header class="u-align-center-xs u-border-1 u-border-grey-25 u-clearfix u-gradient u-header u-header" id="sec-9c83">
    <div class="u-clearfix u-sheet u-sheet-1">
        <a href="https://nicepage.com" class="u-image u-logo u-image-1" data-image-width="315" data-image-height="309">
            <img src="images/BUITEMS_logo.png" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-align-left u-menu u-menu-dropdown u-nav-spacing-25 u-offcanvas u-menu-1">
            <div class="menu-collapse"
                 style="font-size: 1.5rem; letter-spacing: 0px; font-weight: 700; text-transform: uppercase;">
                <a class="u-button-style u-custom-active-border-color u-custom-border u-custom-border-color u-custom-border-radius u-custom-borders u-custom-hover-border-color u-custom-padding-bottom u-custom-text-active-color u-custom-text-color u-custom-text-hover-color u-custom-top-bottom-menu-spacing u-nav-link"
                   href="#" style="padding: 1px 0px; font-size: calc(1em + 2px);">
                    <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 302 302" style="">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-7b92"></use>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                         id="svg-7b92" x="0px" y="0px" viewBox="0 0 302 302" style="enable-background:new 0 0 302 302;"
                         xml:space="preserve" class="u-svg-content"><g><rect y="36" width="302" height="30"></rect><rect
                            y="236" width="302" height="30"></rect><rect y="136" width="302" height="30"></rect>
</g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g></svg>
                </a>
            </div>
            <div class="u-custom-menu u-nav-container">
                <ul class="u-nav u-spacing-30 u-unstyled u-nav-1">
                    <li class="u-nav-item"><a
                            class="u-border-6 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-radius-4 u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90"
                            href="Home.html" style="padding: 10px 0px;">Home</a>
                    </li>
                    <li class="u-nav-item"><a
                            class="u-border-6 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-radius-4 u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90"
                            href="About.html" style="padding: 10px 0px;">About</a>
                    </li>
                    <li class="u-nav-item"><a
                            class="u-border-6 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-radius-4 u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90"
                            href="Contact.html" style="padding: 10px 0px;">Contact</a>
                    </li>
                    <li class="u-nav-item"><a
                            class="u-border-6 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-radius-4 u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90"
                            href="Log-In.html" style="padding: 10px 0px;">Log In</a>
                    </li>
                    <li class="u-nav-item"><a
                            class="u-border-6 u-border-active-palette-1-base u-border-hover-palette-1-base u-border-no-left u-border-no-right u-border-no-top u-button-style u-nav-link u-radius-4 u-text-active-palette-1-base u-text-grey-90 u-text-hover-grey-90"
                            href="Sign-Up.html" style="padding: 10px 0px;">Sign Up</a>
                    </li>
                </ul>
            </div>
            <div class="u-custom-menu u-nav-container-collapse">
                <div class="u-align-center u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
                    <div class="u-inner-container-layout u-sidenav-overflow">
                        <div class="u-menu-close"></div>
                        <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2">
                            <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html"
                                                      style="padding: 10px 20px;">Home</a>
                            </li>
                            <li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html"
                                                      style="padding: 10px 20px;">About</a>
                            </li>
                            <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Contact.html"
                                                      style="padding: 10px 20px;">Contact</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
            </div>
        </nav>
    </div>
</header>
<section class="u-clearfix u-section-1" id="sec-6d0d">
    <div class="u-clearfix u-image u-sheet u-image-1" data-image-width="1280" data-image-height="853">
        <div class="u-shape u-shape-rectangle u-white u-shape-1"></div>
        <h2 class="u-text u-text-default u-text-1">Book Room</h2>
        <div class="u-form u-form-1">
            <form action="/reservation" method="POST"
                  class="u-clearfix u-form-custom-backend u-form-spacing-10 u-form-vertical u-inner-form"
                  style="padding: 10px" source="custom" name="form" redirect="true">
                <div class="u-form-group u-form-name">
                    <label for="name-3b9a" class="u-form-control-hidden u-label">Name</label>
                    <input type="text" placeholder="Enter your CNIC" id="name-3b9a" name="name"
                           class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-radius-15 u-white"
                           required="required">
                </div>
                <div class="u-form-group u-form-partition-factor-2 u-form-group-2">
                    <label for="text-0252" class="u-form-control-hidden u-label"></label>
                    <input type="text" id="text-0252" name="text"
                           class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-radius-15 u-white"
                           placeholder="Reference">
                </div>
                <div class="u-form-group u-form-partition-factor-2 u-form-group-3">
                    <label for="text-af38" class="u-form-control-hidden u-label"></label>
                    <input type="text" placeholder="Purpose of Visit" id="text-af38" name="text-1"
                           class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-radius-15 u-white">
                </div>
                <div class="u-form-date u-form-group u-form-partition-factor-2 u-form-group-4">
                    <label for="date-ba0f"  class="u-label">Check In Date</label>
                    <input type="date" required pattern="\d{4}-\d{2}-\d{2}" placeholder="Check in Date" id="date-ba0f" name="date"
                           class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-radius-15 u-white"
                           required="required">
                </div>
                <div class="u-form-date u-form-group u-form-partition-factor-2 u-form-group-5">
                    <label for="date-65d1" class="u-label">Check Out Date</label>
                    <input type="date" required pattern="\d{4}-\d{2}-\d{2}" placeholder="Check out Date" id="date-65d1" name="date-1"
                           class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-radius-15 u-white"
                           required="required">
                </div>
                <div class="u-form-group u-form-select u-form-group-6">
                    <label for="select-03a1" class="u-form-control-hidden u-label"></label>
                    <div class="u-form-select-wrapper">
                        <select onclick=" getRooms()" id="select-03a1" name="select"
                                class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-radius-15 u-white"
                                required="required">
                            <option id="choosing" value="Choose Between Available Rooms">Choose Between Available
                                Rooms
                            </option>
                            <option value="Item 2">Item 2</option>
                            <option value="Item 3">Item 3</option>
                        </select>
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="12" version="1" class="u-caret">
                            <path fill="currentColor" d="M4 8L0 4h8z"></path>
                        </svg>
                    </div>
                </div>
                <div class="u-align-center u-form-group u-form-submit">
                    <a href="#" class="u-btn u-btn-round u-btn-submit u-button-style u-radius-15">Submit</a>
                    <input type="submit" value="submit" class="u-form-control-hidden">
                </div>
                <div class="u-form-send-message u-form-send-success"></div>
                <div class="u-form-send-error u-form-send-message"></div>
                <input type="hidden" value="" name="recaptchaResponse">
            </form>
        </div>
    </div>
</section>
<section class="u-align-center u-clearfix u-section-2" id="sec-7b39">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <h1 class="u-text u-text-default u-text-1">My Bookings</h1>
        <div class="u-expanded-width u-table u-table-responsive u-table-1">
            <table class="u-table-entity u-table-entity-1">
                <colgroup>
                    <col width="25%">
                    <col width="25%">
                    <col width="25%">
                    <col width="25%">
                </colgroup>
                <thead class="u-palette-4-base u-table-header u-table-header-1">
                <tr style="height: 21px;">
                    <th class="u-border-1 u-border-palette-4-base u-table-cell u-text-palette-2-dark-3">Room Number</th>
                    <th class="u-border-1 u-border-palette-4-base u-table-cell u-text-palette-2-dark-3">Check in</th>
                    <th class="u-border-1 u-border-palette-4-base u-table-cell u-text-palette-2-dark-3">Check Out</th>
                    <th class="u-border-1 u-border-palette-4-base u-table-cell u-text-palette-2-dark-3">Status</th>
                </tr>
                </thead>
                <tbody class="u-table-body">
                <tr style="height: 75px;">
                    <td class="u-border-1 u-border-grey-30 u-first-column u-grey-5 u-table-cell u-table-cell-5">Row 1
                    </td>
                    <td class="u-border-1 u-border-grey-30 u-table-cell">Description</td>
                    <td class="u-border-1 u-border-grey-30 u-table-cell">Description</td>
                    <td class="u-border-1 u-border-grey-30 u-table-cell">Description</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>


<footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-b76c">
    <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Sample text. Click to select the text box. Click again or
            double click to start editing the text.</p>
    </div>
</footer>
<section class="u-backlink u-clearfix u-grey-80">
    <a class="u-link" href="https://nicepage.com/website-templates" target="_blank">
        <span>Website Templates</span>
    </a>
    <p class="u-text">
        <span>created with</span>
    </p>
    <a class="u-link" href="https://nicepage.com/" target="_blank">
        <span>Website Builder Software</span>
    </a>.
</section>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js"
        integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ=="
        crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

<script type="text/javascript">

// Connect to websocket
    var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);

var preIndate;
var preOutdate;

 var InDate = document.getElementById("date-65d1").value ;
        var outDate = document.getElementById("date-ba0f").value;

 var refresh;

function getRooms(){
         InDate = document.getElementById("date-ba0f").value  ;
         outDate = document.getElementById("date-65d1").value  ;

        if (InDate == "" || outDate == ""){
            alert("Set up the dates first");
         } else {


        var indo =InDate.split('-');
        var out =outDate.split('-');
        // Please pay attention to the month (parts[1]); JavaScript counts months from 0:
        // January - 0, February - 1, etc.
        var inD = new Date(indo[0], indo[1] - 1, indo[2]);
        var outD = new Date(out[0], out[1] - 1, out[2]);
        console.log("inD: " + inD.toDateString());
        console.log("outD: " + outD.toDateString());

        socket.emit('message', {'checkin': InDate, 'checkOut' : outDate} );

        socket.on('gotrooms', data => {
            console.log(JSON.stringify(data["rooms"]));

            select = document.getElementById('select-03a1');


            if (InDate != preIndate || outDate != preOutdate ){

            preIndate = InDate;
            preOutdate = outDate;

             console.log(preIndate + " -> " + InDate );
            console.log(preOutdate + " -> " + outDate );
            console.log(InDate != preIndate || outDate != preOutdate);

            refresh = true;

            }

            else {

            refresh = false;

            }


            if (refresh){
            function removeOptions(selectElement) {
               var i, L = selectElement.options.length - 1;
               for(i = L; i >= 0; i--) {
                  selectElement.remove(i);
               }
            }

            removeOptions(select);

             var opt = document.createElement('option');
             opt.value = "Select a room";
             opt.innerHTML = "Select a room";
             opt.disabled = true;
             select.appendChild(opt);

            for (var i = 0; i < data["rooms"].length; i++)
            {
                var opt = document.createElement('option');
                opt.value = data["rooms"][i][0];
                opt.innerHTML = data["rooms"][i];
                console.log(data["rooms"][1]);
                select.appendChild(opt);
            }
            }





        });


        }
    }













</script>


</body>
</html>